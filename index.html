<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple &amp; Sinister</title>
<style>
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#0f1115;color:#f5f5f5}
header{padding:1rem;text-align:center;font-weight:600;letter-spacing:.5px}
section{padding:1rem}
.card{background:#1b1f27;border-radius:14px;padding:1rem;margin-bottom:1rem}
h2{font-size:1rem;margin:0 0 .75rem 0;font-weight:600}
.row{display:flex;justify-content:space-between;align-items:center;margin:.35rem 0}
button{background:#2e3442;color:#fff;border:none;border-radius:12px;padding:.6rem .9rem;font-size:.9rem}
button.primary{background:#4c7dff}
button.done{background:#2f9e44}
.timer{font-size:2rem;text-align:center;margin:.5rem 0}
.set{display:flex;justify-content:space-between;padding:.35rem 0}
.star{color:#ffd43b}
footer{padding:1rem;text-align:center;font-size:.8rem;color:#777}
</style>
</head>
<body>

<header>Simple &amp; Sinister</header>

<section>
<div class="card"><h2>Status</h2><div id="status">Loading…</div></div>

<div class="card" id="warmup">
<h2>Warm-up</h2>
<div id="warmupList"></div>
<button class="primary" onclick="nextBlock('skill')">Warm-up done</button>
</div>

<div class="card" id="skill" style="display:none">
<h2>Skill</h2>
<div id="skillName"></div>
<div class="timer" id="skillTimer">5:00</div>
<button onclick="startTimer('skill',300)">Start</button>
<button class="done" onclick="nextBlock('swings')">Finish</button>
</div>

<div class="card" id="swings" style="display:none">
<h2>Swings</h2>
<div class="timer" id="swingTimer">0:00</div>
<div id="swingSets"></div>
<button onclick="startCountUp('swingTimer')">Start Swings</button>
<button class="done" onclick="finishSwings()">Finish Swings</button>
</div>

<div class="card" id="rest" style="display:none">
<h2>Rest</h2>
<div class="timer" id="restTimer">1:00</div>
</div>

<div class="card" id="getups" style="display:none">
<h2>Get-Ups</h2>
<div class="timer" id="getupTimer">0:00</div>
<div id="getupSets"></div>
<button onclick="startCountUp('getupTimer')">Start Get-Ups</button>
<button class="done" onclick="finishGetUps()">Finish Get-Ups</button>
</div>

<div class="card" id="cooldown" style="display:none">
<h2>Cool-down</h2>
<div class="row">90/90 Stretch</div>
<div class="row">Straddle Stretch</div>
<button class="primary" onclick="finishSession()">Finish Session</button>
</div>
</section>

<footer>Simple &amp; Sinister</footer>

<script>
let state = JSON.parse(localStorage.getItem('ss_state')) || {session:0,S:24,step:1,phase:'auto',skillCycle:0,skillSet:'I'};

const SFG1=[
{name:'Military Press',ladder:'1-2-3'},
{name:'Double Front Squat',ladder:'1-2-3'},
{name:'Snatch',ladder:'5-10-15'},
{name:'Double Clean',ladder:'2-4-6'}
];

const SFG2=[
{name:'Push Press / Push Jerk',ladder:'2-4-6'},
{name:'Bent Press / Windmill',ladder:'1-2-3'},
{name:'Clean / Snatch + Reverse Lunge',ladder:'1-2-3'},
{name:'Bottom-Up Clean–Press–Squat',ladder:'1-1-1'}
];

function init(){
updatePhase();
renderStatus();
renderWarmup();
renderSkill();
renderSwings();
renderGetUps();
}

function updatePhase(){
if(state.phase==='auto'){
state.currentPhase=state.S>=32?'post':'timeless';
state.sessionsPerWeek=state.currentPhase==='post'?4:null;
}
}

function renderStatus(){
document.getElementById('status').innerText=`Session ${state.session+1} · ${state.currentPhase==='post'?'Post-Simple':'Timeless'} · Step ${state.step}/5`;
}

function renderWarmup(){
const list=document.getElementById('warmupList');
list.innerHTML='';
if(state.currentPhase==='post'){
['Prying Goblet Squat','Arm Bar (L)','Goblet Squat @ S','Arm Bar (R)','Goblet Squat @ S'].forEach(x=>list.innerHTML+=`<div class="row">${x}</div>`);
}else{
['Prying Goblet Squat','Halo','Hip Bridge'].forEach(x=>list.innerHTML+=`<div class="row">${x}</div>`);
}
}

function renderSkill(){
const skills=state.skillSet==='I'?SFG1:SFG2;
const s=skills[state.skillCycle%skills.length];
document.getElementById('skillName').innerText=`${s.name}   ${s.ladder}`;
}

function renderSwings(){
const div=document.getElementById('swingSets');
div.innerHTML='';
for(let i=1;i<=10;i++){
let star=(state.step>1&&i>=3&&i<=(state.step*2))||state.step===5;
div.innerHTML+=`<div class="set">${i} · ${state.S}kg ${star?'<span class="star">★</span>':''}</div>`;
}
}

function renderGetUps(){
const div=document.getElementById('getupSets');
div.innerHTML='';
for(let i=1;i<=5;i++){
let star=(state.step>1&&i>=2&&i<=state.step)||state.step===5;
div.innerHTML+=`<div class="set">L${i} · ${state.S}kg ${star?'<span class="star">★</span>':''}</div>`;
div.innerHTML+=`<div class="set">R${i} · ${state.S}kg ${star?'<span class="star">★</span>':''}</div>`;
}
}

function nextBlock(id){
document.querySelectorAll('.card').forEach(c=>c.style.display='none');
document.getElementById(id).style.display='block';
}

let timerInterval;
function startTimer(id,seconds){
clearInterval(timerInterval);
let t=seconds;
timerInterval=setInterval(()=>{
t--;
document.getElementById(id+'Timer').innerText=`${Math.floor(t/60)}:${String(t%60).padStart(2,'0')}`;
if(t<=0)clearInterval(timerInterval);
},1000);
}

function startCountUp(id){
clearInterval(timerInterval);
let t=0;
timerInterval=setInterval(()=>{
t++;
document.getElementById(id).innerText=`${Math.floor(t/60)}:${String(t%60).padStart(2,'0')}`;
},1000);
}

function finishSwings(){
clearInterval(timerInterval);
if(state.currentPhase==='post'&&state.session%state.sessionsPerWeek===state.sessionsPerWeek-1){
nextBlock('rest');
startTimer('rest',60);
setTimeout(()=>nextBlock('getups'),60000);
}else{
nextBlock('getups');
}
}

function finishGetUps(){
clearInterval(timerInterval);
nextBlock('cooldown');
}

function finishSession(){
state.session++;
if(state.currentPhase==='post'&&state.session%16===0){state.step++;}
if(state.step>5){
state.step=1;
state.S+=4;
state.skillSet=state.skillSet==='I'?'II':'I';
}
state.skillCycle++;
localStorage.setItem('ss_state',JSON.stringify(state));
location.reload();
}

init();
</script>

</body>
</html>
